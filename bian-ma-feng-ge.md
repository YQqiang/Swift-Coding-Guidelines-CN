# ç¼–ç é£Žæ ¼

## ä¸€èˆ¬è§„åˆ™

### 1. é›†åˆè½¬æ¢

ä»Žä¸€ä¸ªé›†åˆè½¬æ¢åˆ°å¦ä¸€ä¸ªé›†åˆæ—¶ï¼Œå°½é‡ä½¿ç”¨mapã€filterã€reduceå’Œå…¶ä»–ä¸€äº›ç±»ä¼¼å‡½æ•°å¼ç¼–ç¨‹æ“ä½œç¬¦ç»„åˆï¼Œé¿å…ä½¿ç”¨è¿­ä»£çš„æ–¹å¼ã€‚

{% hint style="info" %}
åœ¨ä½¿ç”¨è¿™äº›æ–¹æ³•æ—¶é¿å…ä½¿ç”¨æœ‰å‰¯ä½œç”¨çš„é—­åŒ…ã€‚
{% endhint %}

```swift
// æŽ¨èä½¿ç”¨
let stringOfInts = [1, 2, 3].flatMap { String($0) }

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
var stringOfInts: [String] = []
for integer in [1, 2, 3] {
    stringOfInts.append(String(integer))
}
```

```swift
// æŽ¨èä½¿ç”¨
let evenNumbers = [4, 8, 15, 16, 23, 42].filter { $0 % 2 == 0 }

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
var evenNumbers: [Int] = []
for integer in [4, 8, 15, 16, 23, 42] {
    if integer % 2 == 0 {
        evenNumbers.append(integer)
    }
}
```

### 2. ä»£ç†å¼±å¼•ç”¨

åœ¨`delegate`å’Œ`protocol`ä¸­ï¼Œç¡®ä¿ç”Ÿå‘½å‘¨æœŸï¼Œå±žæ€§ä½¿ç”¨`weak`ã€‚

### 3. é—­åŒ…å¼±å¼•ç”¨

åœ¨é—­åŒ…ä¸­é¿å…å¾ªçŽ¯å¼•ç”¨

```swift
myFunction() { [weak self] (error) -> Void in
    // ä½¿ç”¨å¯é€‰å€¼
    self?.doSomething()

    // æˆ–è€…ä½¿ç”¨ 'guard let' è§£åŒ…
    guard let strongSelf = self else {
        return
    }

    strongSelf.doSomething()
}
```

### 4. ç±»åž‹æŽ¨æ–­

ä¸è¦ä½¿ç”¨ç±»æ–¹æ³•çš„ç®€å†™ï¼Œå› ä¸ºä»Žç±»æ–¹æ³•æ¯”æžšä¸¾æŽ¨æ–­ä¸Šä¸‹æ–‡é€šå¸¸æ›´å›°éš¾ã€‚

### 5. æ–¹æ³•é‡å†™

åœ¨ç¼–å†™æ–¹æ³•æ—¶ï¼Œéœ€è¦è€ƒè™‘æ˜¯å¦éœ€è¦é‡å†™ï¼Œå¦‚æžœä¸éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨`final`æ˜¾ç¤ºçš„æ ‡è®°ï¼Œè¿™æ ·å¯ä»¥æé«˜ç¼–è¯‘æ—¶é—´ã€‚

### 6. ç±»æ–¹æ³•å’Œç±»å±žæ€§

åœ¨å£°æ˜Žä¸Žç±»å…³è”çš„å‡½æ•°æˆ–å±žæ€§æ—¶ï¼Œé¦–é€‰æ˜¯`static` è€Œä¸æ˜¯`class`ã€‚

å½“æˆ‘ä»¬éœ€è¦åœ¨å­ç±»ä¸­é‡å†™è¯¥å‡½æ•°æˆ–æ–¹æ³•æ—¶æ‰ä½¿ç”¨`class`ã€‚

{% hint style="info" %}
å¯ä»¥è€ƒè™‘ä½¿ç”¨`Protocol`å®žçŽ°è¿™ä¸€ç‚¹ã€‚
{% endhint %}

### 7. è®¡ç®—å±žæ€§

å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œä»…ä»…æ˜¯è¿”å›žä¸€äº›å¯¹è±¡æˆ–å€¼ï¼Œæœ€å¥½ä½¿ç”¨è®¡ç®—å±žæ€§ã€‚

```swift
// æŽ¨èä½¿ç”¨
public var fullName: String {
    return "\(self.name) \(self.surname)"
}

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
function fullName() -> String {
    return "\(self.name) \(self.surname)"
} 
```

## å˜é‡

### 1. `let` å’Œ`var` 

å°½é‡ä½¿ç”¨`let`å£°æ˜Žå˜é‡ï¼Œåªæœ‰å½“å˜é‡ç¡®å®žéœ€è¦æ”¹å˜æ—¶ï¼Œæ‰éœ€è¦å£°æ˜Žä¸º`var`ã€‚

### 2. å±žæ€§å€¼

å¦‚æžœå±žæ€§çš„å€¼ç›´åˆ°è¢«åˆ›å»ºæ—¶æ‰çŸ¥é“ï¼Œé‚£ä¹ˆä»ç„¶å¯ä»¥ä½¿ç”¨`let`ï¼šåœ¨åˆå§‹åŒ–æœŸé—´åˆ†é…å¸¸é‡å±žæ€§ã€‚

### 3. ç±»åž‹æŽ¨å¯¼

å¦‚æžœå¸¸é‡æˆ–å˜é‡èƒ½å¤Ÿè‡ªåŠ¨æŽ¨å¯¼ç±»åž‹ï¼Œ æœ€å¥½ä¸è¦æ˜¾ç¤ºçš„å£°æ˜Žç±»åž‹ã€‚

### 4. å…·æœ‰æè¿°æ€§

å£°æ˜Žå˜é‡æ—¶ï¼Œåº”è¯¥å…·æœ‰æè¿°æ€§ï¼Œä¸éœ€è¦å¤ªè¯¦ç»†ã€‚

```swift
// Dictionary æ˜¯å¤šä½™çš„
var someDictionary: Dictionary = [String: String]()
// CGPoint é‡å¤
var somePoint: CGPoint = CGPoint(x:100, y: 200)
// b ä¸å…·æœ‰æè¿°æ€§
var b = Bool(false)
```

### 5. é¿å…é‡å¤

é¿å…é‡å¤ç±»åž‹ä¿¡æ¯ï¼Œä¸€æ¬¡å°±å¤Ÿäº†ã€‚

## å¸¸é‡

### 1. ç§æœ‰å¸¸é‡

åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä¸Žä¹‹ç›¸å…³çš„æ–‡ä»¶ä¿æŒå¸¸é‡æ˜¯ç§æœ‰çš„ã€‚

### 2. å®šä¹‰å¸¸é‡

ä¸ºä»£ç ä¸­ä¸å˜çš„æ•°æ®å®šä¹‰å¸¸é‡ã€‚

ä¾‹å¦‚ï¼šå•å…ƒæ ¼å¤ç”¨æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œ`key`åç§°ï¼ˆKVC æˆ–è€… å­—å…¸ï¼‰ï¼Œ`segue`æ ‡è¯†ç¬¦ã€‚

### 3. é™æ€å¸¸é‡

å¦‚æžœå¸¸é‡æ˜¯åœ¨ç±»æˆ–è€…ç»“æž„ä½“ä¸­å£°æ˜Žçš„ï¼Œåˆ™å¿…é¡»å°†å…¶å£°æ˜Žä¸º`static`ï¼Œä»¥é¿å…ä¸ºæ¯ä¸ªå®žä¾‹å£°æ˜Žä¸€ä¸ªå¸¸é‡ã€‚

### 4. ä¸å¿…ä½¿ç”¨`K`å‰ç¼€

`Swift`ä¸­å¸¸é‡ä¸å¿…ä½¿ç”¨`K`ä½œä¸ºå‰ç¼€ã€‚

### 5. æ–‡ä»¶çº§å¸¸é‡

æ–‡ä»¶çº§å¸¸é‡å¿…é¡»ä½¿ç”¨`fileprivate let`å£°æ˜Žã€‚

## å…ƒç»„

### 1. å‡½æ•°è¿”å›žå€¼

å¦‚æžœä¸€ä¸ªå‡½æ•°è¿”å›žå¤šä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨å‘½åå…ƒç»„ã€‚

å¦‚æžœè¿”å›žç±»åž‹å¾ˆæ˜Žæ˜¾ï¼Œå¯ä»¥çœç•¥å‘½åã€‚

å¦‚æžœä¸€ä¸ªå…ƒç»„ä¸­æœ‰3ä¸ªæˆ–3ä¸ªä»¥ä¸Šçš„é¡¹ï¼Œéœ€ä½¿ç”¨ç±»æˆ–ç»“æž„ä½“æ›¿æ¢ã€‚

### 2. é‡å®šä¹‰

å¦‚æžœä¸æ­¢ä¸€æ¬¡çš„ä½¿ç”¨æŸä¸ªå…ƒç»„ï¼Œéœ€è¦ä½¿ç”¨`typealias`å®šä¹‰ã€‚

å¦‚`public typealias Address = (name: String, number: Int)`

## è®¿é—®ä¿®é¥°ç¬¦

### 1. é¡ºåº

è®¿é—®ä¿®é¥°ç¬¦å¿…é¡»æ”¾åœ¨å£°æ˜Žå±žæ€§ä¹‹å‰ã€‚

```swift
// æŽ¨èä½¿ç”¨
private static let myPrivateVar: Int

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
static private let myPrivateVar: Int
```

### 2. åŒä¸€è¡Œå†…å£°æ˜Ž

è®¿é—®ä¿®é¥°ç¬¦å…³é”®å­—åº”è¯¥å’Œå…¶ä»–ä»£ç æ”¾åœ¨ä¸€è¡Œã€‚

```swift
// æŽ¨èä½¿ç”¨
open class MyClass {
    /* ... */
}

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
open
class MyClass {
    /* ... */
}
```

### 3. é»˜è®¤ä¿®é¥°ç¬¦

é»˜è®¤ä¿®é¥°ç¬¦ä¸º`internal`ï¼Œæ— éœ€æ˜¾ç¤ºçš„å£°æ˜Žã€‚

### 4. å•å…ƒæµ‹è¯•

å½“æ‚¨éœ€è¦ä¸ºå•å…ƒæµ‹è¯•è®¾ç½®ä¸€ä¸ªå˜é‡ä¸º`open`æ—¶ï¼Œå°†å…¶æ ‡è®°ä¸ºå†…éƒ¨ä½¿ç”¨`@testable import Module`ã€‚

å¦‚æžœå±žæ€§åº”è¯¥æ˜¯ç§æœ‰çš„ï¼Œä½†æ˜¯ä¸ºäº†å•å…ƒæµ‹è¯•çš„ç›®çš„è€Œå°†å…¶å£°æ˜Žä¸ºå†…éƒ¨å±žæ€§ï¼Œéœ€è¦æ·»åŠ é€‚å½“çš„æ–‡æ¡£æ³¨é‡Šã€‚

```swift
/**
 This property defines the pirate's name.
 - warning: Not `private` for `@testable`.
 */
let myVar = "A Value"
```

### 5. ç§æœ‰

å°½é‡ä½¿ç”¨`private` è€Œä¸æ˜¯`fileprivate`ã€‚

### 6. å…¬å¼€

å¦‚æžœåœ¨æ¨¡å—å¤–éƒ¨å¯ä»¥è®¾ç½®å­ç±»åŒ–çš„å†…å®¹ï¼Œå°½é‡ä½¿ç”¨`open`è€Œä¸æ˜¯`public`ã€‚

## è‡ªå®šä¹‰æ“ä½œç¬¦

### 1. é¿å…è‡ªå®šä¹‰è¿ç®—ç¬¦

åº”è¯¥é¿å…åˆ›å»ºè‡ªå®šä¹‰è¿ç®—ç¬¦ï¼Œé˜²æ­¢é™ä½Žä»£ç çš„å¯è¯»æ€§ã€‚å¦‚æžœéœ€è¦åˆ›å»ºè‡ªå®šä¹‰è¿ç®—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨å‘½åå‡½æ•°æ›¿æ¢ã€‚

### 2. é‡å†™çŽ°æœ‰æ“ä½œç¬¦

 å¯ä»¥è¦†ç›–çŽ°æœ‰çš„æ“ä½œç¬¦æ¥æ”¯æŒæ–°çš„ç±»åž‹ã€‚å¦‚ä½¿ç”¨`==`æ¯”è¾ƒæ—¶ã€‚

### 3. æ›´å¤šå‚è€ƒ

æ›´å¤šå‚è€ƒå†…å®¹[NSHipster article](http://nshipster.com/swift-operators/#guidelines-for-swift-operators).

## Switch å’Œ Enums

### 1. break

Switchè¯­å¥ä¸­ä¸å­˜åœ¨éšå¼è´¯ç©¿ï¼Œå› æ­¤ä¸éœ€è¦åœ¨ case åˆ†æ”¯ä¸­æ˜¾å¼åœ°ä½¿ç”¨ `break` è¯­å¥ã€‚

### 2. default

å½“ä½¿ç”¨å…·æœ‰æœ‰é™å¯èƒ½çš„`Switch`è¯­å¥æ—¶ï¼Œä¸è¦ä½¿ç”¨`default case`ä¸ºæœªä½¿ç”¨çš„`case`åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç”¨ä¾‹ã€‚

### 3. å¯¹é½

`case`å’Œ`switch`å·¦ä¾§å¯¹é½

### 4. å…³è”å€¼

å½“ä¸ºæžšä¸¾å®šä¹‰å…³è”å€¼æ—¶ï¼Œä¸€å®šè¦æ˜¾å¼åœ°æè¿°å®ƒã€‚

```swift
// æŽ¨èä½¿ç”¨
case animated(duration: TimeInterval

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
case animated(TimeInterval)
```

### 5. list case

ä¼˜å…ˆä½¿ç”¨`list case` ï¼ˆå¦‚`case 1, 2, 3:`ï¼‰ã€‚

### 6. æŠ›å‡ºé”™è¯¯

å½“æœ‰caseæœªæ‰§è¡Œåˆ°ï¼Œéœ€è¦æŠŠé”™è¯¯ä¿¡æ¯æŠ›åˆ°ä¸Šå±‚è€Œä¸æ˜¯é»˜è®¤å¤±è´¥ã€‚

```swift
func doSomethingWithNumber(_ digit: Int) throws {
    switch digit {
    case 0, 1, 2, 3, 4, 5:
        /* ... */
    default:
        throw Error(message: "Cannot handle this value")
    }
}
```

### 7. é¿å…å†™å‡ºæžšä¸¾ç±»åž‹

å½“ç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªåŠ¨æŽ¨å¯¼å‡ºæžšä¸¾ç±»åž‹æ—¶ï¼Œåˆ™ä¸éœ€è¦å†™å‡ºæžšä¸¾ç±»åž‹ã€‚

```swift
// æŽ¨è
.enumValue

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
MyEnum.enumValue
```

## å¯é€‰å€¼

### 1. é¿å…å¼ºåˆ¶è§£åŒ…

é¿å…ä½¿ç”¨`!`,`as!`,`try!`å¼ºåˆ¶è§£åŒ…ï¼Œå½“å¼ºåˆ¶è§£åŒ…ç©ºå†…å®¹æ—¶ä¼šå¼•å‘å´©æºƒã€‚

### 2. å¯é€‰ç±»åž‹

å½“å˜é‡ï¼Œå‡½æ•°è¿”å›žå€¼å¯ä»¥ä¸º`nil`æ—¶ï¼Œéœ€è¦å£°æ˜Žä¸ºå¯é€‰ç±»åž‹ï¼ˆ`?`ï¼‰ã€‚

### 3. æ˜¾ç¤ºæ¯”è¾ƒ

å½“éœ€è¦åˆ¤æ–­å€¼æ˜¯å¦ä¸º`nil`åˆä¸éœ€è¦è§£åŒ…å‡ºæ¥çš„å€¼ï¼Œåˆ™å¯ä»¥è¿›è¡Œæ˜¾ç¤ºæ¯”è¾ƒã€‚

```swift
// æŽ¨èä½¿ç”¨
if someOptional != nil {
    /* ... */
}

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
if let _ = someOptional {
    /* ... */
}
```

### 4. é¿å…ä½¿ç”¨**`unowned`**

é¿å…ä½¿ç”¨éšå¼è§£åŒ…

```swift
// æŽ¨èä½¿ç”¨
weak var myViewController: UIViewController?

// ä¸æŽ¨èä½¿ç”¨
weak var myViewController: UIViewController!
unowned var myViewController: UIViewController
```

### 5. ä½¿ç”¨ç›¸åŒåç§°è§£åŒ…

å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å˜é‡åç§°è§£åŒ…

```swift
guard let aValue = aValue else {
    /* ... */
}
```

### 6. å¤šä¸ªå¯é€‰ç»‘å®š

åœ¨åŒä¸€ä¸ª`if`è¯­å¥ä¸­å¯ä»¥ä½¿ç”¨å¤šä¸ªå¯é€‰ç»‘å®šï¼Œé¿å…å¤šé‡`if`åµŒå¥—ã€‚

é”™è¯¯ä½¿ç”¨âŒ

```swift
if let id = json[Constants.id] as? Int {
    if let firstName = json[Constants.firstName] as? String {
        if let lastName = json[Constants.lastName] as? String {
            if let initials = json[Constants.initials] as? String {
                /* ... */
            }
        }
    }
}
```

æ­£ç¡®ä½¿ç”¨âœ…

```swift
if
    let id = json[Constants.Id] as? Int,
    let firstName = json[Constants.firstName] as? String,
    let lastName = json[Constants.lastName] as? String,
    let initials = json[Constants.initials] as? String {
        /* ... */
}
```

### 7. å¤šä¸ªå¯é€‰ç»‘å®šçš„æ ¼å¼

å½“ä½¿ç”¨`if`æˆ–`guard`å¯¹å¤šä¸ªå¯é€‰å€¼è¿›è¡Œè§£åŒ…æ—¶ï¼Œå°†æ¯ä¸ªå¸¸é‡æˆ–å˜é‡æ”¾åœ¨ä¸€è¡Œï¼ŒåŽé¢è·Ÿç€ä¸€ä¸ªé€—å·`,`ï¼Œæœ€åŽä¸€è¡Œé™¤å¤–ã€‚

å½“æ˜¯`guard`è¯­å¥æ—¶ï¼Œæœ€åŽä¸€è¡Œæ˜¯å˜é‡åŽé¢è·Ÿç€ `else {`,

å½“æ˜¯`if`è¯­å¥æ—¶ï¼Œæœ€åŽä¸€è¡Œæ˜¯å˜é‡åŽé¢è·Ÿç€`{`ã€‚

```swift
if
    let constantOne = valueOne,
    let constantTwo = valueTwo,
    let constantThree = valueThree {
        // Code
}
```

## åè®®

### 1. ç»„ç»‡ä»£ç 

1. ä½¿ç”¨`// MARK:`å°†åè®®ä¸Žå…¶ä»–ä»£ç åˆ†å¼€ã€‚
2. åœ¨`class`æˆ–`struct`çš„å®žçŽ°ä¹‹å¤–åˆ›å»º`extension`ï¼Œä½†åœ¨åŒä¸€ä¸ªæ–‡ä»¶å†…ã€‚

{% hint style="info" %}
\#2 å­ç±»ä¸èƒ½è¦†ç›–æ‰©å±•é‡Œçš„æ–¹æ³•ã€‚
{% endhint %}

### 2. @objc

å¦‚æžœåè®®å…·æœ‰å¯é€‰æ–¹æ³•ï¼Œåˆ™å¿…é¡»ä½¿ç”¨`@objc` å…³é”®å­—å£°æ˜Žå®ƒã€‚

### 3. å¤šä¸ªç±»ä½¿ç”¨åŒä¸€åè®®

å¤šä¸ªç±»ä½¿ç”¨åŒä¸€åè®®ï¼Œè¯·åœ¨è‡ªå·±çš„æ–‡ä»¶å†…å£°æ˜Žã€‚

### 4. ä»…æ”¯æŒclassçš„åè®®

è‹¥ä»…æ”¯æŒç±»ç±»åž‹çš„åè®®ï¼Œéœ€è¦å¢žåŠ `class`å…³é”®å­—ã€‚

## å±žæ€§

### 1. åªè¯»è®¡ç®—å±žæ€§

åˆ›å»ºåªè¯»è®¡ç®—å±žæ€§ï¼Œä¸éœ€è¦å¢žåŠ `get {}` ã€‚

```swift
// æŽ¨èä½¿ç”¨
var diameter: Double {
    return radius * 2
}

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
var diameter: Double {
    get {
        return radius * 2
    }
}
```

### 2. ä»£ç ç¼©è¿›

`get {}`, `set {}`, `willSet` , `didSet` å¿…é¡»ä½¿ç”¨ä»£ç ç¼©è¿›ã€‚

### 3. newValueï¼ŒoldValue

åœ¨`set`ã€`get`æ–¹æ³•ä¸­ä½¿ç”¨æ ‡å‡†çš„`newValue`ï¼Œ`oldValue`ã€‚

### 4. å•ä¾‹çš„å®žçŽ°

å¿…é¡»ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼

```swift
class NetworkManager {
    private init() {}
    static let shared = NetworkManager()
    /* ... */
}
```

### 5. æ‡’åŠ è½½

ä½¿ç”¨`lazy`å…³é”®å­—ï¼Œå®žçŽ°æ‡’åŠ è½½ï¼Œå»¶è¿Ÿå¯¹è±¡çš„åˆå§‹åŒ–ï¼ŒæŽ§åˆ¶å£°æ˜Žå‘¨æœŸï¼Œåœ¨ç‰¹æ®Šæƒ…å†µä¸‹æ ¹æ®éœ€è¦å‡å°‘å†…å­˜åˆ†é…ã€‚

## ä¸‰ç›®è¿ç®—ç¬¦

ä¸ºäº†å¢žåŠ æ¸…æ™°åº¦å’Œä»£ç æ•´æ´åº¦ï¼Œå¯é€‚å½“ä½¿ç”¨ä¸‰æœ¨è¿ç®—ç¬¦`? :` ã€‚

```swift
// æŽ¨èä½¿ç”¨
var value = 5
result = value != 0 ? x : y

// ðŸ™…â€â™‚ï¸ä¸æŽ¨è
result = a > b ? x = c > d ? c : d : y
```

## é—­åŒ…













